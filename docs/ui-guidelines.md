# UI 実装ガイドライン

本ドキュメントは /docs/requirements.md を補完し、画面ごとの UI 仕様・ユーザーからの追加要望を整理する。

## Today (ホーム)
- ヘッダーは日付(YYYY / MM/DD) + 天気(最高ミニマム/最低温度)を1行または2行でコンパクトに表示。文字サイズを大きくし視認性を高める。
- カレンダー予定: 色付きカード + タイムライン (カレンダー画面と同じ `TimelineItem`)。イベントはタップで編集シート。
- タスクセクション: 今日が期限のタスクのみ表示し、他日タスクを追加するには「タスクリスト」へ誘導。
- タイムライン表示: 6:00~24:00、イベント/タスクをブロック表示し注釈を入れる。
- 習慣: アイコン・カラーを付け、タップで完了トグル。
- ヘルス: 歩数棒グラフ (値ラベル付き)、睡眠タイムラインの概要、ステップ/スリープの相関チャート。
- **FAB (Floating Action Button)**: 画面右下に常駐。「＋」アイコン。タップで「タスクを追加」「予定を追加」メニューを展開。
- **ツールバー (右上)**: 以下の3つを配置し、Today / Calendar で統一する。
  - [メモ]: 共通メモエディタを開く
  - [リスト]: 予定リスト / タスクリスト の選択メニュー
  - [設定]: アプリ設定画面を開く

## カレンダー
- 表示モード: 週/月切替 (segmented control)。
- 月表示: カレンダーを数字表記 (月名を英語ではなく数字)。今日の枠は淡い背景。ダブルタップ案内を必ず記載。
- 週表示: 上部に週カレンダー、下に週タイムライン。時間軸と予定ブロックがズレないよう `TimelineAxisView` / `TimelineColumnView` で統一。  
  - タイムライン下に日詳細 (タスク/習慣/日記/ヘルス) を月表示と同じコンポーネントで表示。  
  - 日付ダブルタップで追加できることを文言で案内。  
  - 予定/タスクともに編集シートあり。  
  - 表示重なりを避けるためカラム幅や blockHeight を調整。  
  - 今日以外の日にいる場合のみ「今日へ」ボタン表示。
- 週/ 月ヘッダー: 左右スワイプ (ボタン) で移動、週移動は 7 日単位。
- **FAB / ツールバー**: Todayと同様に右下にFAB、右上に統一ツールバー (メモ/リスト/設定) を配置する。

## 設定 (Settings)
- 構成:
  - **カレンダー**: 「カレンダー連携」リンク (外部カレンダーマッピング設定へ遷移)
  - **プライバシー**: 「アプリロック」トグル (ONでFace ID/パスコード有効化)
  - **ヘルスケア**: 設定アプリへの誘導ボタン + 手順テキスト
  - **サポート**: 「応援する」(レビュー) / 「不具合報告」(メーラー起動)
- モーダルまたはナビゲーション遷移で表示。

## フィードバック & Haptics
- 完了アクション (タスク完了、習慣達成、日記保存) 時に `UINotificationFeedbackGenerator().notificationOccurred(.success)` を実行。
- 習慣の連続達成時などは視覚的演出と共に強めのフィードバックを検討。

## Habits & Countdown
- 習慣リストの先頭に説明文を配置し、SF Symbols 名称が難しい場合はアイコン選択グリッドで代替。  
- カラー選択はパレット式。  
- 各習慣行をタップで編集モーダル。  
- Weeks × Habits のマトリクスで完了チェックが一目。
- 年間草 (53 週 × 7 日): 達成率 5 段階の緑グラデーション。今日セルは白枠/軽い拡大で強調し、初期表示は右端 (今日を含む週) が見える位置まで自動スクロール。セルタップで当日サマリーシートを開き、予定されている習慣のみをリスト表示し、そこでチェック ON/OFF 可能 (予定外の日付は編集不可)。
- 年間草カード下に統計ラベルを配置し、「今年の平均達成率」「今月の平均達成率」を%表示。
- ミニ草 (各習慣 8 週間): 小さな矩形を横スクロールで並べ、今日セルに細枠マーカー。行タップで詳細ビューへ。
- HabitDetailView: 直近ヒートマップ + ストリーク/合計達成数。履歴リストは予定日だけトグル表示し、非予定日は「予定なし」で読み取り専用。編集ボタンから習慣編集に遷移。

## Health
- 「ヘルスケア」タブ:  
  - サマリカードから歩数/睡眠履歴を開けるようタップ可能に。  
  - 歩数歴: バー上に歩数ラベル、横スクロールで全期間。  
  - 睡眠: 途切れない縦棒 (RectangleMark) + 期間注釈。棒内部に睡眠時間テキスト。  
  - 履歴ビュー: 範囲 (週/1か月/6か月/1年) 切替 & 横スワイプで移動。  
  - Apple フィットネス (ムーブ/エクササイズ/スタンド) の最新値 or 平均を表示。  
  - 相関グラフ: 睡眠 vs 歩数、点の色で体調スコア、注釈で気分絵文字。

## Diary
- テキスト入力欄は空のプレースホルダーで開始。削除不要。  
- 体調 Picker: 絵文字表示 (😫~😄)。  
- 気分 Picker: `MoodLevel` (emoji + ラベル)。  
- 写真: PhotosPicker から追加、最大 50 枚、現在枚数を注記。  
- ロケーション: 「訪れた場所を保存しておきましょう」メッセージ + MapKit 検索シート。  
- 保存時に位置情報/説明文/写真パスを DB へ。

## カレンダー & 予定
- カレンダー名ではなくカテゴリ/用途をラベルで表示し直感的に。  
- 予定追加/変更: Today / カレンダー から開ける `CalendarEventEditorView` で完結。  
- ダブルタップ追加の説明文を Today / カレンダー の上下に配置。

## ナビゲーション & 操作メモ
- Today や カレンダー のタイムラインに「ダブルタップで追加」注記を設置。
- カレンダー週ビューで別日を開いた際は「今日へ戻る」ボタン。今日を表示中は非表示。
- 週ビューの移動は週単位、月ビューは月単位。週カレンダーの時間軸左側がずれないよう GeometryReader で調整。
- 予定/タスク/習慣などの編集シートのタイトル・説明は日本語で統一。

## 表記ルール
- 日付・曜日・時間はすべて日本語ロケール (`ja-JP`) で表記する。 `DateFormatter` や `.formatted(.dateTime…)` を利用する場合も、必ずロケール設定を見直し、月や曜日が英語にならないようにする。

## 参照
- 仕様書: `/docs/requirements.md`
- 実装: `Views/Today/TodayView.swift`, `Views/Journal/JournalView.swift`, `Views/Health/`, `Views/Habits/`, `Views/Diary/DiaryEditorView.swift`
