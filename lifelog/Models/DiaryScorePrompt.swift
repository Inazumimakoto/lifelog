//
//  DiaryScorePrompt.swift
//  lifelog
//
//  Created by Codex on 2026/01/05.
//

import Foundation

/// æ—¥è¨˜AIæŽ¡ç‚¹ç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¢ãƒ¼ãƒ‰
enum DiaryScoreMode: String, CaseIterable, Identifiable {
    case strict = "ðŸ“š ã—ã£ã‹ã‚Šæ·»å‰Š"
    case gentle = "ðŸŒ¸ ã‚„ã•ã—ã‚"
    case analysis = "ðŸ”¬ åˆ†æžãƒ¢ãƒ¼ãƒ‰"
    
    var id: String { rawValue }
    
    var description: String {
        switch self {
        case .strict: return "è«–ç†çš„ã§è§£åƒåº¦ã®é«˜ã„æ–‡ç« ã‚’ç›®æŒ‡ã™"
        case .gentle: return "åŠ±ã¾ã—å¤šã‚ã€æ”¹å–„ç‚¹ã¯ã‚„ã•ã—ã"
        case .analysis: return "æ„Ÿæƒ…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„å‚¾å‘ã‚’åˆ†æž"
        }
    }
}

/// AIåˆ†æžã®å®Ÿè¡Œå…ˆ
enum AIProvider: String, CaseIterable, Identifiable {
    case chatgpt = "ã‚³ãƒ”ãƒ¼"
    case devpc = "ç›´æŽ¥åˆ†æž"
    
    var id: String { rawValue }
    
    var icon: String {
        switch self {
        case .chatgpt: return "sparkles"
        case .devpc: return "desktopcomputer"
        }
    }
}

/// æ—¥è¨˜AIæŽ¡ç‚¹ç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†
enum DiaryScorePrompt {
    
    /// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆã—ã£ã‹ã‚Šæ·»å‰Šï¼‰ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
    static let defaultPrompt = strictPrompt
    
    /// ðŸ“š ã—ã£ã‹ã‚Šæ·»å‰Šãƒ¢ãƒ¼ãƒ‰
    static let strictPrompt = """
# å‘½ä»¤æ›¸
ã‚ãªãŸã¯è«–ç†çš„æ€è€ƒåŠ›ã¨é«˜åº¦ãªè¨€èªžåŒ–èƒ½åŠ›ã‚’æŒã¤å°‚å±žã®ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã‚³ãƒ¼ãƒã§ã™ã€‚
ç§ã®ã€Œä»Šæ—¥ã®æ—¥è¨˜ï¼ˆãƒ¡ãƒ¢ï¼‰ã€ã‚’èª­ã¿ã€ä»¥ä¸‹ã®3ã¤ã®è¦³ç‚¹ã§åŽ³ã—ãã€ã‹ã¤å»ºè¨­çš„ã«æŽ¡ç‚¹ãƒ»æ·»å‰Šã—ã¦ãã ã•ã„ã€‚

## è©•ä¾¡åŸºæº–ï¼ˆå„10ç‚¹æº€ç‚¹ï¼‰
1. **äº‹å®Ÿã¨è§£é‡ˆã®åˆ†é›¢ï¼ˆFact Controlï¼‰**
   - èµ·ããŸå‡ºæ¥äº‹ï¼ˆäº‹å®Ÿï¼‰ã¨ã€è‡ªåˆ†ã®æ„Ÿæƒ³ï¼ˆè§£é‡ˆï¼‰ãŒæ··åŒã•ã‚Œãšã«åŒºåˆ¥ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
   - å› æžœé–¢ä¿‚ï¼ˆãªãœãã†ãªã£ãŸã‹ï¼‰ãŒæ˜Žç¢ºã‹ï¼Ÿ
2. **æ„Ÿæƒ…ã®è§£åƒåº¦ï¼ˆVocabulary Resolutionï¼‰**
   - ã€Œãƒ¤ãƒã„ã€ã€Œã‚¨ã‚°ã„ã€ã€Œã™ã”ã„ã€ãªã©ã®æ±Žç”¨çš„ãªè¨€è‘‰ã«é€ƒã’ãšã€å…·ä½“çš„ãªæ„Ÿæƒ…ã‚„èº«ä½“åå¿œã‚’è¨€èªžåŒ–ã§ãã¦ã„ã‚‹ã‹ï¼Ÿ
3. **å®¢è¦³çš„ãªä¼é”æ€§ï¼ˆUser Viewï¼‰**
   - ãã®å ´ã«ã„ãªã„ç¬¬ä¸‰è€…ï¼ˆæ–‡è„ˆã‚’çŸ¥ã‚‰ãªã„äººï¼‰ãŒèª­ã‚“ã§ã‚‚ã€çŠ¶æ³ã¨èƒŒæ™¯ãŒä¼ã‚ã‚‹ã‹ï¼Ÿ

## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
### 1. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
- **ç·åˆç‚¹:** /30ç‚¹
- **å†…è¨³:**
  - äº‹å®Ÿã¨è§£é‡ˆ:  /10
  - æ„Ÿæƒ…è¨€èªžåŒ–:  /10
  - å®¢è¦³çš„ä¼é”:  /10

### 2. å…·ä½“çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- **âœ¨ è‰¯ã‹ã£ãŸç‚¹:** ï¼ˆè‰¯ã„è¡¨ç¾ã‚„ãƒ•ãƒ¬ãƒ¼ã‚ºãŒã‚ã‚Œã°è¤‡æ•°æŒ™ã’ã¦OKï¼‰
- **ðŸ“ æƒœã—ã„ç‚¹:** ï¼ˆå…·ä½“çš„ã«ã©ã®å˜èªžã‚„è¡¨ç¾ãŒã€ŒãƒŽã‚¤ã‚ºã€ã‚„ã€Œè§£åƒåº¦ä¸è¶³ã€ã ã£ãŸã‹ï¼‰

### 3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆä¿®æ­£æ¡ˆï¼‰
ç§ã®æ—¥è¨˜ã®å†…å®¹ã‚’ä¿æŒã—ã¤ã¤ã€ã€Œè«–ç†çš„ã§è§£åƒåº¦ã®é«˜ã„æ–‡ç« ã€ã«æ›¸ãç›´ã—ã¦ãã ã•ã„ã€‚
â€»é›£ã—ã„è¨€è‘‰ã‚’ä½¿ã„ã™ãŽãšã€ã‚ãã¾ã§ã€Œä¼ã‚ã‚Šã‚„ã™ã•ã€ã‚’é‡è¦–ã™ã‚‹ã“ã¨ã€‚

### 4. æ˜Žæ—¥ã¸ã®æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ
æ˜Žæ—¥ã®æ—¥è¨˜ã‚’æ›¸ãã¨ãã«æ„è­˜ã—ã¦ã¿ã¦ã»ã—ã„ã“ã¨ï¼ˆ1ã¤ã ã‘ã€å…·ä½“çš„ã«ï¼‰

---
# ä»Šæ—¥ã®æ—¥è¨˜

"""
    
    /// ðŸŒ¸ ã‚„ã•ã—ã‚ãƒ¢ãƒ¼ãƒ‰
    static let gentlePrompt = """
# ãŠé¡˜ã„
ã‚ãªãŸã¯å„ªã—ãåŠ±ã¾ã—ã¦ãã‚Œã‚‹æ—¥è¨˜ã®èª­è€…ã§ã™ã€‚
ç§ã®ã€Œä»Šæ—¥ã®æ—¥è¨˜ï¼ˆãƒ¡ãƒ¢ï¼‰ã€ã‚’èª­ã‚“ã§ã€æ¸©ã‹ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãã ã•ã„ã€‚

## ã‚„ã£ã¦ã»ã—ã„ã“ã¨
1. ã¾ãšã€æ—¥è¨˜ã‚’æ›¸ã„ãŸã“ã¨è‡ªä½“ã‚’è¤’ã‚ã‚‹
2. å°è±¡ã«æ®‹ã£ãŸãƒ•ãƒ¬ãƒ¼ã‚ºã‚„è¡¨ç¾ã‚’å¼•ç”¨ã—ã¦è¤’ã‚ã‚‹
3. ã€Œã‚‚ã£ã¨ã“ã†ã™ã‚‹ã¨ã‚‚ã£ã¨è‰¯ããªã‚‹ã‹ã‚‚ã€ã‚’ã‚„ã•ã—ã1ã¤ã ã‘ææ¡ˆ

## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
### ðŸŒŸ ä»Šæ—¥ã®æ—¥è¨˜ã€ç´ æ•µã§ã—ãŸï¼
ï¼ˆå…¨ä½“ã®æ„Ÿæƒ³ã‚’2-3è¡Œã§ï¼‰

### âœ¨ ç‰¹ã«è‰¯ã‹ã£ãŸã¨ã“ã‚
ï¼ˆå…·ä½“çš„ãªãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å¼•ç”¨ã—ãªãŒã‚‰è¤’ã‚ã‚‹ï¼‰

### ðŸ’¡ æ˜Žæ—¥ã¸ã®ãƒ’ãƒ³ãƒˆ
ï¼ˆ1ã¤ã ã‘ã€ã‚„ã•ã—ãææ¡ˆï¼‰

---
# ä»Šæ—¥ã®æ—¥è¨˜

"""
    
    /// ðŸ”¬ åˆ†æžãƒ¢ãƒ¼ãƒ‰
    static let analysisPrompt = """
# å‘½ä»¤æ›¸
ã‚ãªãŸã¯å¿ƒç†åˆ†æžã®å°‚é–€å®¶ã§ã™ã€‚
ç§ã®ã€Œä»Šæ—¥ã®æ—¥è¨˜ï¼ˆãƒ¡ãƒ¢ï¼‰ã€ã‚’èª­ã‚“ã§ã€å®¢è¦³çš„ã«åˆ†æžã—ã¦ãã ã•ã„ã€‚

## åˆ†æžã—ã¦ã»ã—ã„ã“ã¨
1. **æ„Ÿæƒ…ã®æŽ¨ç§»**: æ—¥è¨˜å…¨ä½“ã‚’é€šã˜ã¦ã€ã©ã‚“ãªæ„Ÿæƒ…ãŒã©ã†å¤‰åŒ–ã—ã¦ã„ã‚‹ã‹
2. **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º**: ç¹°ã‚Šè¿”ã—å‡ºã¦ãã‚‹è¨€è‘‰ã‚„ãƒ†ãƒ¼ãƒž
3. **æ½œåœ¨çš„ãªã‚¹ãƒˆãƒ¬ã‚¹è¦å› **: æ–‡é¢ã‹ã‚‰èª­ã¿å–ã‚Œã‚‹å¿ƒé…äº‹ã‚„èª²é¡Œ
4. **ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå…†å€™**: å‰å‘ããªè¦ç´ ã‚„æˆé•·ã®å…†ã—

## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ
### ðŸ“Š æ„Ÿæƒ…åˆ†æž
ï¼ˆæ„Ÿæƒ…ã®æŽ¨ç§»ã‚’ã‚°ãƒ©ãƒ•çš„ã«è¡¨ç¾ï¼‰

### ðŸ”‘ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1: ï¼ˆå‡ºç¾å›žæ•°ã‚„æ–‡è„ˆï¼‰
- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2: ...

### âš ï¸ æ°—ã«ãªã‚‹ãƒã‚¤ãƒ³ãƒˆ
ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹è¦å› ãŒã‚ã‚Œã°æŒ‡æ‘˜ï¼‰

### ðŸŒ± ãƒã‚¸ãƒ†ã‚£ãƒ–ãªç™ºè¦‹
ï¼ˆå‰å‘ããªè¦ç´ ã‚’æŒ™ã’ã‚‹ï¼‰

### ðŸ’­ ä»Šæ—¥ã®ã‚ãªãŸã¸
ï¼ˆåˆ†æžã‚’è¸ã¾ãˆãŸä¸€è¨€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼‰

---
# ä»Šæ—¥ã®æ—¥è¨˜

"""
    
    /// ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—
    static func prompt(for mode: DiaryScoreMode) -> String {
        switch mode {
        case .strict: return strictPrompt
        case .gentle: return gentlePrompt
        case .analysis: return analysisPrompt
        }
    }
    
    /// ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨æ—¥è¨˜æœ¬æ–‡ã‚’çµåˆ
    static func build(prompt: String, diaryText: String) -> String {
        return prompt + diaryText
    }
}
